import{a as n,j as e}from"./state-Cs2e8pUQ.js";import{S as g}from"./SEO-Bh0iMLaf.js";import{i as b}from"./index-HFgk6O2Q.js";import"./vendor-CXKupAPx.js";const y={pending:"bg-yellow-100 text-yellow-800",submitted:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};function c(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)}function p(){try{const s=localStorage.getItem("blueprint_orders");return s?JSON.parse(s):[]}catch{return[]}}function v(){const[s,d]=n.useState([]),[x,o]=n.useState("all"),[m,u]=n.useState(null);n.useEffect(()=>{async function t(){try{const a=await b();a.length>0?d(a.sort((r,l)=>l.submittedAt.localeCompare(r.submittedAt))):d(p().sort((r,l)=>(l.submittedAt||"").localeCompare(r.submittedAt||"")))}catch{d(p())}}t()},[]);const i=x==="all"?s:s.filter(t=>t.status===x),h=s.filter(t=>t.status==="approved").reduce((t,a)=>t+a.total,0);return e.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx(g,{title:"Order Reports",description:"View PO submissions and order reports.",canonical:"/admin/orders"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Order Reports"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"Track PO submissions, status, and revenue."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"sharp-card bg-white p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.length})]}),e.jsxs("div",{className:"sharp-card bg-white p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 uppercase",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:s.filter(t=>t.status==="pending"||t.status==="submitted").length})]}),e.jsxs("div",{className:"sharp-card bg-white p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 uppercase",children:"Approved Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:c(h)})]})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["all","pending","submitted","approved","rejected"].map(t=>e.jsx("button",{onClick:()=>o(t),className:`text-xs font-bold uppercase px-3 py-1.5 border ${x===t?"border-blueprint-blue text-blueprint-blue bg-blue-50":"border-gray-300 text-gray-500 hover:border-gray-400"}`,children:t},t))}),e.jsx("div",{className:"sharp-card bg-white overflow-hidden",children:i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Submitted"})]})}),e.jsx("tbody",{children:i.map(t=>{const a=m===t.id;return e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:[e.jsxs("button",{onClick:()=>u(a?null:t.id),className:"hover:text-blueprint-blue",children:[t.poNumber||t.id.slice(0,8),e.jsx("span",{className:"text-[10px] text-gray-400 ml-1",children:a?"▲":"▼"})]}),a&&e.jsxs("div",{className:"mt-3 p-4 bg-gray-50 border border-gray-200 text-xs space-y-1 font-sans",children:[e.jsx("p",{className:"font-bold text-gray-700 uppercase tracking-wider mb-2",children:"Line Items"}),t.items.map((r,l)=>e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100 last:border-0",children:[e.jsx("span",{className:"text-gray-700",children:r.title}),e.jsx("span",{className:"text-gray-500",children:c(r.price)})]},l)),e.jsxs("div",{className:"flex justify-between pt-2 font-bold text-gray-900",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:c(t.total)})]}),t.email&&e.jsxs("p",{className:"pt-2",children:[e.jsx("span",{className:"text-gray-500",children:"Contact:"})," ",t.email]})]})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:t.company}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[t.items.length," item",t.items.length!==1?"s":""]}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:c(t.total)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-1 ${y[t.status]||"bg-gray-100 text-gray-600"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(t.submittedAt).toLocaleDateString()})]},t.id)})})]})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"No orders to display."}),e.jsx("p",{className:"text-sm text-gray-400",children:"Orders will appear here when customers submit purchase orders."})]})})]})}export{v as default};
