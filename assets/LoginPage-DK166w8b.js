import{a as s,j as e}from"./state-Cs2e8pUQ.js";import{u as A,e as B,L as y}from"./vendor-D7HEtn7k.js";import{e as I,a as O,R as d,o as f,B as j,E as T}from"./index-HBtRV3iF.js";import{B as R}from"./Button-DadLVxJo.js";import{S as D}from"./SEO-Du-LTs__.js";import"./charts-HkUfyz1_.js";function z(){const{login:w,error:u}=I(),v=A(),N=O(),[S]=B(),L=S.get("returnTo")||d.DASHBOARD,[r,M]=s.useState(""),[m,C]=s.useState(""),[x,g]=s.useState(!1),[o,l]=s.useState(0),[n,P]=s.useState(!1),h=s.useCallback(()=>{if(!r)return;const t=f(r);!t.allowed&&t.retryAfterMs?l(t.retryAfterMs):l(0)},[r]);s.useEffect(()=>{if(o<=0)return;const t=setInterval(()=>{l(i=>{const k=i-1e3;return k<=0?(clearInterval(t),0):k})},1e3);return()=>clearInterval(t)},[o]);const E=async t=>{t.preventDefault();const i=f(r);if(!i.allowed){l(i.retryAfterMs||0);return}g(!0);try{await w({email:r,password:m}),N(T.LOGIN_COMPLETED,{email:r}),v(L,{replace:!0})}catch{h()}finally{g(!1)}},a=o>0,p=Math.ceil(o/6e4),c=Math.ceil(o/1e3),b="w-full border border-gray-300 px-3 py-2 text-gray-900 bg-white focus:outline-none focus:border-blueprint-blue focus:ring-1 focus:ring-blueprint-blue dark:bg-slate-800 dark:border-slate-600 dark:text-gray-100";return e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(D,{title:"Sign In",description:"Sign in to your Blueprint Marketplace account."}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-700 border-t-4 border-t-blueprint-blue p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Sign In"}),a&&e.jsxs("div",{role:"alert",className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200 text-sm",children:[e.jsx("p",{className:"font-medium",children:"Account temporarily locked"}),e.jsxs("p",{className:"mt-1",children:["Too many failed attempts. Try again in"," ",c>60?`${p} minute${p!==1?"s":""}`:`${c} second${c!==1?"s":""}`,"."]})]}),u&&!a&&e.jsx("div",{role:"alert",className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 text-sm",children:u}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),e.jsx("input",{id:"login-email",type:"email",value:r,onChange:t=>M(t.target.value),onBlur:h,required:!0,autoComplete:"email",className:b,disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"login-password",type:n?"text":"password",value:m,onChange:t=>C(t.target.value),required:!0,minLength:6,autoComplete:"current-password",className:b,disabled:a}),e.jsx("button",{type:"button",onClick:()=>P(!n),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600","aria-label":n?"Hide password":"Show password",tabIndex:-1,children:n?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsx(R,{type:"submit",className:"w-full",disabled:x||a,children:x?"Signing in...":a?"Locked Out":"Sign In"})]}),e.jsxs("div",{className:"mt-6 text-sm text-center space-y-2",children:[e.jsx(y,{to:d.FORGOT_PASSWORD,className:"text-blueprint-blue hover:underline block",children:"Forgot password?"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Don't have an account?"," ",e.jsx(y,{to:d.SIGNUP,className:"text-blueprint-blue hover:underline",children:"Sign up"})]})]}),e.jsxs("p",{className:"mt-6 text-[11px] text-gray-400 text-center leading-relaxed",children:["By signing in you agree to our"," ",e.jsx("a",{href:j.terms,target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-gray-600",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:j.privacy,target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-gray-600",children:"Privacy Policy"}),"."]})]})]})}export{z as default};
