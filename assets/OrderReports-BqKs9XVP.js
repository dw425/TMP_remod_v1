import{a as d,j as e}from"./state-Cs2e8pUQ.js";import{S as b}from"./SEO-D1cN5Og7.js";import{l as u}from"./index-D8m8VeQt.js";import"./vendor-D7HEtn7k.js";import"./charts-HkUfyz1_.js";const h={pending:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300",submitted:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",approved:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",rejected:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"};function x(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a)}function o(){try{const a=localStorage.getItem("blueprint_orders");return a?JSON.parse(a):[]}catch{return[]}}function v(){const[a,n]=d.useState([]),[c,p]=d.useState("all"),[m,g]=d.useState(null);d.useEffect(()=>{async function t(){try{const r=await u();r.length>0?n(r.sort((s,l)=>l.submittedAt.localeCompare(s.submittedAt))):n(o().sort((s,l)=>(l.submittedAt||"").localeCompare(s.submittedAt||"")))}catch{n(o())}}t()},[]);const i=c==="all"?a:a.filter(t=>t.status===c),y=a.filter(t=>t.status==="approved").reduce((t,r)=>t+r.total,0);return e.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx(b,{title:"Order Reports",description:"View PO submissions and order reports.",canonical:"/admin/orders"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Order Reports"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8",children:"Track PO submissions, status, and revenue."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"sharp-card bg-white dark:bg-slate-800 p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:a.length})]}),e.jsxs("div",{className:"sharp-card bg-white dark:bg-slate-800 p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:a.filter(t=>t.status==="pending"||t.status==="submitted").length})]}),e.jsxs("div",{className:"sharp-card bg-white dark:bg-slate-800 p-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Approved Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:x(y)})]})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["all","pending","submitted","approved","rejected"].map(t=>e.jsx("button",{onClick:()=>p(t),className:`text-xs font-bold uppercase px-3 py-1.5 border ${c===t?"border-blueprint-blue text-blueprint-blue bg-blue-50 dark:bg-blue-900/30":"border-gray-300 dark:border-slate-600 text-gray-500 dark:text-gray-400 hover:border-gray-400 dark:hover:border-slate-500"}`,children:t},t))}),e.jsx("div",{className:"sharp-card bg-white dark:bg-slate-800 overflow-hidden",children:i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Company"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Submitted"})]})}),e.jsx("tbody",{children:i.map(t=>{const r=m===t.id;return e.jsxs("tr",{className:"border-t border-gray-100 dark:border-slate-700",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-gray-900 dark:text-gray-100",children:[e.jsxs("button",{onClick:()=>g(r?null:t.id),className:"hover:text-blueprint-blue",children:[t.poNumber||t.id.slice(0,8),e.jsx("span",{className:"text-[10px] text-gray-400 ml-1",children:r?"▲":"▼"})]}),r&&e.jsxs("div",{className:"mt-3 p-4 bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600 text-xs space-y-1 font-sans",children:[e.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-2",children:"Line Items"}),t.items.map((s,l)=>e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-slate-600 last:border-0",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s.title}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:x(s.price)})]},l)),e.jsxs("div",{className:"flex justify-between pt-2 font-bold text-gray-900 dark:text-gray-100",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:x(t.total)})]}),t.email&&e.jsxs("p",{className:"pt-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Contact:"})," ",t.email]})]})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:t.company}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:[t.items.length," item",t.items.length!==1?"s":""]}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:x(t.total)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-1 ${h[t.status]||"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-gray-400"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:new Date(t.submittedAt).toLocaleDateString()})]},t.id)})})]})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-2",children:"No orders to display."}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Orders will appear here when customers submit purchase orders."})]})})]})}export{v as default};
