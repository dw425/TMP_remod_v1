import{b as R,j as g,a as Ft}from"./state-Cs2e8pUQ.js";import{g as pt}from"./platforms-C7wVRla3.js";import{g as wt}from"./index-B6_ClUOr.js";import{g as At}from"./romConfigStore-Dx8DXKh7.js";import{B as $e}from"./Button-DXKAJ8Rw.js";import{u as kt}from"./useAlerts-BbWCtuZg.js";import{b as St,u as Dt,N as Et}from"./vendor-CXKupAPx.js";import"./index-C6ytLmkY.js";var he=e=>e.type==="checkbox",ie=e=>e instanceof Date,I=e=>e==null;const at=e=>typeof e=="object";var E=e=>!I(e)&&!Array.isArray(e)&&at(e)&&!ie(e),Nt=e=>E(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,Ct=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ot=(e,s)=>e.has(Ct(s)),jt=e=>{const s=e.constructor&&e.constructor.prototype;return E(s)&&s.hasOwnProperty("isPrototypeOf")},Ee=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function j(e){if(e instanceof Date)return new Date(e);const s=typeof FileList<"u"&&e instanceof FileList;if(Ee&&(e instanceof Blob||s))return e;const r=Array.isArray(e);if(!r&&!(E(e)&&jt(e)))return e;const a=r?[]:Object.create(Object.getPrototypeOf(e));for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=j(e[o]));return a}var Ve=e=>/^\w*$/.test(e),k=e=>e===void 0,Ne=e=>Array.isArray(e)?e.filter(Boolean):[],Ce=e=>Ne(e.replace(/["|']|\]/g,"").split(/\.|\[/)),m=(e,s,r)=>{if(!s||!E(e))return r;const a=(Ve(s)?[s]:Ce(s)).reduce((o,l)=>I(o)?o:o[l],e);return k(a)||a===e?k(e[s])?r:e[s]:a},G=e=>typeof e=="boolean",$=e=>typeof e=="function",A=(e,s,r)=>{let a=-1;const o=Ve(s)?[s]:Ce(s),l=o.length,u=l-1;for(;++a<l;){const f=o[a];let w=r;if(a!==u){const S=e[f];w=E(S)||Array.isArray(S)?S:isNaN(+o[a+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=w,e=e[f]}};const Ke={BLUR:"blur",FOCUS_OUT:"focusout"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Mt=R.createContext(null);Mt.displayName="HookFormControlContext";var Tt=(e,s,r,a=!0)=>{const o={defaultValues:s._defaultValues};for(const l in e)Object.defineProperty(o,l,{get:()=>{const u=l;return s._proxyFormState[u]!==K.all&&(s._proxyFormState[u]=!a||K.all),e[u]}});return o};const Rt=typeof window<"u"?R.useLayoutEffect:R.useEffect;var B=e=>typeof e=="string",Lt=(e,s,r,a,o)=>B(e)?(a&&s.watch.add(e),m(r,e,o)):Array.isArray(e)?e.map(l=>(a&&s.watch.add(l),m(r,l))):(a&&(s.watchAll=!0),r),Se=e=>I(e)||!at(e);function te(e,s,r=new WeakSet){if(Se(e)||Se(s))return Object.is(e,s);if(ie(e)&&ie(s))return Object.is(e.getTime(),s.getTime());const a=Object.keys(e),o=Object.keys(s);if(a.length!==o.length)return!1;if(r.has(e)||r.has(s))return!0;r.add(e),r.add(s);for(const l of a){const u=e[l];if(!o.includes(l))return!1;if(l!=="ref"){const f=s[l];if(ie(u)&&ie(f)||E(u)&&E(f)||Array.isArray(u)&&Array.isArray(f)?!te(u,f,r):!Object.is(u,f))return!1}}return!0}const It=R.createContext(null);It.displayName="HookFormContext";var Pt=(e,s,r,a,o)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:o||!0}}:{},ye=e=>Array.isArray(e)?e:[e],ze=()=>{let e=[];return{get observers(){return e},next:o=>{for(const l of e)l.next&&l.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(l=>l!==o)}}),unsubscribe:()=>{e=[]}}};function lt(e,s){const r={};for(const a in e)if(e.hasOwnProperty(a)){const o=e[a],l=s[a];if(o&&E(o)&&l){const u=lt(o,l);E(u)&&(r[a]=u)}else e[a]&&(r[a]=l)}return r}var L=e=>E(e)&&!Object.keys(e).length,Oe=e=>e.type==="file",ve=e=>{if(!Ee)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},nt=e=>e.type==="select-multiple",je=e=>e.type==="radio",Ut=e=>je(e)||he(e),ke=e=>ve(e)&&e.isConnected;function Bt(e,s){const r=s.slice(0,-1).length;let a=0;for(;a<r;)e=k(e)?a++:e[s[a++]];return e}function qt(e){for(const s in e)if(e.hasOwnProperty(s)&&!k(e[s]))return!1;return!0}function D(e,s){const r=Array.isArray(s)?s:Ve(s)?[s]:Ce(s),a=r.length===1?e:Bt(e,r),o=r.length-1,l=r[o];return a&&delete a[l],o!==0&&(E(a)&&L(a)||Array.isArray(a)&&qt(a))&&D(e,r.slice(0,-1)),e}var Wt=e=>{for(const s in e)if($(e[s]))return!0;return!1};function ot(e){return Array.isArray(e)||E(e)&&!Wt(e)}function De(e,s={}){for(const r in e){const a=e[r];ot(a)?(s[r]=Array.isArray(a)?[]:{},De(a,s[r])):k(a)||(s[r]=!0)}return s}function ne(e,s,r){r||(r=De(s));for(const a in e){const o=e[a];if(ot(o))k(s)||Se(r[a])?r[a]=De(o,Array.isArray(o)?[]:{}):ne(o,I(s)?{}:s[a],r[a]);else{const l=s[a];r[a]=!te(o,l)}}return r}const Ge={value:!1,isValid:!1},Je={value:!0,isValid:!0};var ut=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?Je:{value:e[0].value,isValid:!0}:Je:Ge}return Ge},ct=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:a})=>k(e)?e:s?e===""?NaN:e&&+e:r&&B(e)?new Date(e):a?a(e):e;const Ye={isValid:!1,value:null};var dt=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,Ye):Ye;function Qe(e){const s=e.ref;return Oe(s)?s.files:je(s)?dt(e.refs).value:nt(s)?[...s.selectedOptions].map(({value:r})=>r):he(s)?ut(e.refs).value:ct(k(s.value)?e.ref.value:s.value,e)}var Ht=(e,s,r,a)=>{const o={};for(const l of e){const u=m(s,l);u&&A(o,l,u._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:a}},xe=e=>e instanceof RegExp,fe=e=>k(e)?e:xe(e)?e.source:E(e)?xe(e.value)?e.value.source:e.value:e,Xe=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched});const Ze="AsyncFunction";var $t=e=>!!e&&!!e.validate&&!!($(e.validate)&&e.validate.constructor.name===Ze||E(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===Ze)),Kt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),et=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const me=(e,s,r,a)=>{for(const o of r||Object.keys(e)){const l=m(e,o);if(l){const{_f:u,...f}=l;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],o)&&!a)return!0;if(u.ref&&s(u.ref,u.name)&&!a)return!0;if(me(f,s))break}else if(E(f)&&me(f,s))break}}};function tt(e,s,r){const a=m(e,r);if(a||Ve(r))return{error:a,name:r};const o=r.split(".");for(;o.length;){const l=o.join("."),u=m(s,l),f=m(e,l);if(u&&!Array.isArray(u)&&r!==l)return{name:r};if(f&&f.type)return{name:l,error:f};if(f&&f.root&&f.root.type)return{name:`${l}.root`,error:f.root};o.pop()}return{name:r}}var zt=(e,s,r,a)=>{r(e);const{name:o,...l}=e;return L(l)||Object.keys(l).length>=Object.keys(s).length||Object.keys(l).find(u=>s[u]===(!a||K.all))},Gt=(e,s,r)=>!e||!s||e===s||ye(e).some(a=>a&&(r?a===s:a.startsWith(s)||s.startsWith(a))),Jt=(e,s,r,a,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(s||e):(r?a.isOnBlur:o.isOnBlur)?!e:(r?a.isOnChange:o.isOnChange)?e:!0,Yt=(e,s)=>!Ne(m(e,s)).length&&D(e,s),Qt=(e,s,r)=>{const a=ye(m(e,r));return A(a,"root",s[r]),A(e,r,a),e};function rt(e,s,r="validate"){if(B(e)||Array.isArray(e)&&e.every(B)||G(e)&&!e)return{type:r,message:B(e)?e:"",ref:s}}var le=e=>E(e)&&!xe(e)?e:{value:e,message:""},st=async(e,s,r,a,o,l)=>{const{ref:u,refs:f,required:w,maxLength:S,minLength:J,min:p,max:N,pattern:v,validate:Y,name:P,valueAsNumber:z,mount:q}=e._f,x=m(r,P);if(!q||s.has(P))return{};const Q=f?f[0]:u,X=b=>{o&&Q.reportValidity&&(Q.setCustomValidity(G(b)?"":b||""),Q.reportValidity())},C={},oe=je(u),ge=he(u),re=oe||ge,ae=(z||Oe(u))&&k(u.value)&&k(x)||ve(u)&&u.value===""||x===""||Array.isArray(x)&&!x.length,W=Pt.bind(null,P,a,C),be=(b,V,O,M=Z.maxLength,H=Z.minLength)=>{const U=b?V:O;C[P]={type:b?M:H,message:U,ref:u,...W(b?M:H,U)}};if(l?!Array.isArray(x)||!x.length:w&&(!re&&(ae||I(x))||G(x)&&!x||ge&&!ut(f).isValid||oe&&!dt(f).isValid)){const{value:b,message:V}=B(w)?{value:!!w,message:w}:le(w);if(b&&(C[P]={type:Z.required,message:V,ref:Q,...W(Z.required,V)},!a))return X(V),C}if(!ae&&(!I(p)||!I(N))){let b,V;const O=le(N),M=le(p);if(!I(x)&&!isNaN(x)){const H=u.valueAsNumber||x&&+x;I(O.value)||(b=H>O.value),I(M.value)||(V=H<M.value)}else{const H=u.valueAsDate||new Date(x),U=de=>new Date(new Date().toDateString()+" "+de),ue=u.type=="time",ce=u.type=="week";B(O.value)&&x&&(b=ue?U(x)>U(O.value):ce?x>O.value:H>new Date(O.value)),B(M.value)&&x&&(V=ue?U(x)<U(M.value):ce?x<M.value:H<new Date(M.value))}if((b||V)&&(be(!!b,O.message,M.message,Z.max,Z.min),!a))return X(C[P].message),C}if((S||J)&&!ae&&(B(x)||l&&Array.isArray(x))){const b=le(S),V=le(J),O=!I(b.value)&&x.length>+b.value,M=!I(V.value)&&x.length<+V.value;if((O||M)&&(be(O,b.message,V.message),!a))return X(C[P].message),C}if(v&&!ae&&B(x)){const{value:b,message:V}=le(v);if(xe(b)&&!x.match(b)&&(C[P]={type:Z.pattern,message:V,ref:u,...W(Z.pattern,V)},!a))return X(V),C}if(Y){if($(Y)){const b=await Y(x,r),V=rt(b,Q);if(V&&(C[P]={...V,...W(Z.validate,V.message)},!a))return X(V.message),C}else if(E(Y)){let b={};for(const V in Y){if(!L(b)&&!a)break;const O=rt(await Y[V](x,r),Q,V);O&&(b={...O,...W(V,O.message)},X(O.message),a&&(C[P]=b))}if(!L(b)&&(C[P]={ref:Q,...b},!a))return C}}return X(!0),C};const Xt={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function Zt(e={}){let s={...Xt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:$(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},o=E(s.defaultValues)||E(s.values)?j(s.defaultValues||s.values)||{}:{},l=s.shouldUnregister?{}:j(o),u={action:!1,mount:!1,watch:!1,keepIsValid:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},w,S=0;const J={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={...J};let N={...p};const v={array:ze(),state:ze()},Y=s.criteriaMode===K.all,P=t=>i=>{clearTimeout(S),S=setTimeout(t,i)},z=async t=>{if(!u.keepIsValid&&!s.disabled&&(p.isValid||N.isValid||t)){let i;s.resolver?(i=L((await re()).errors),q()):i=await W(a,!0),i!==r.isValid&&v.state.next({isValid:i})}},q=(t,i)=>{!s.disabled&&(p.isValidating||p.validatingFields||N.isValidating||N.validatingFields)&&((t||Array.from(f.mount)).forEach(n=>{n&&(i?A(r.validatingFields,n,i):D(r.validatingFields,n))}),v.state.next({validatingFields:r.validatingFields,isValidating:!L(r.validatingFields)}))},x=(t,i=[],n,y,d=!0,c=!0)=>{if(y&&n&&!s.disabled){if(u.action=!0,c&&Array.isArray(m(a,t))){const h=n(m(a,t),y.argA,y.argB);d&&A(a,t,h)}if(c&&Array.isArray(m(r.errors,t))){const h=n(m(r.errors,t),y.argA,y.argB);d&&A(r.errors,t,h),Yt(r.errors,t)}if((p.touchedFields||N.touchedFields)&&c&&Array.isArray(m(r.touchedFields,t))){const h=n(m(r.touchedFields,t),y.argA,y.argB);d&&A(r.touchedFields,t,h)}(p.dirtyFields||N.dirtyFields)&&(r.dirtyFields=ne(o,l)),v.state.next({name:t,isDirty:b(t,i),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else A(l,t,i)},Q=(t,i)=>{A(r.errors,t,i),v.state.next({errors:r.errors})},X=t=>{r.errors=t,v.state.next({errors:r.errors,isValid:!1})},C=(t,i,n,y)=>{const d=m(a,t);if(d){const c=m(l,t,k(n)?m(o,t):n);k(c)||y&&y.defaultChecked||i?A(l,t,i?c:Qe(d._f)):M(t,c),u.mount&&!u.action&&z()}},oe=(t,i,n,y,d)=>{let c=!1,h=!1;const _={name:t};if(!s.disabled){if(!n||y){(p.isDirty||N.isDirty)&&(h=r.isDirty,r.isDirty=_.isDirty=b(),c=h!==_.isDirty);const F=te(m(o,t),i);h=!!m(r.dirtyFields,t),F?D(r.dirtyFields,t):A(r.dirtyFields,t,!0),_.dirtyFields=r.dirtyFields,c=c||(p.dirtyFields||N.dirtyFields)&&h!==!F}if(n){const F=m(r.touchedFields,t);F||(A(r.touchedFields,t,n),_.touchedFields=r.touchedFields,c=c||(p.touchedFields||N.touchedFields)&&F!==n)}c&&d&&v.state.next(_)}return c?_:{}},ge=(t,i,n,y)=>{const d=m(r.errors,t),c=(p.isValid||N.isValid)&&G(i)&&r.isValid!==i;if(s.delayError&&n?(w=P(()=>Q(t,n)),w(s.delayError)):(clearTimeout(S),w=null,n?A(r.errors,t,n):D(r.errors,t)),(n?!te(d,n):d)||!L(y)||c){const h={...y,...c&&G(i)?{isValid:i}:{},errors:r.errors,name:t};r={...r,...h},v.state.next(h)}},re=async t=>(q(t,!0),await s.resolver(l,s.context,Ht(t||f.mount,a,s.criteriaMode,s.shouldUseNativeValidation))),ae=async t=>{const{errors:i}=await re(t);if(q(t),t)for(const n of t){const y=m(i,n);y?A(r.errors,n,y):D(r.errors,n)}else r.errors=i;return i},W=async(t,i,n={valid:!0})=>{for(const y in t){const d=t[y];if(d){const{_f:c,...h}=d;if(c){const _=f.array.has(c.name),F=d._f&&$t(d._f);F&&p.validatingFields&&q([c.name],!0);const T=await st(d,f.disabled,l,Y,s.shouldUseNativeValidation&&!i,_);if(F&&p.validatingFields&&q([c.name]),T[c.name]&&(n.valid=!1,i||e.shouldUseNativeValidation))break;!i&&(m(T,c.name)?_?Qt(r.errors,T,c.name):A(r.errors,c.name,T[c.name]):D(r.errors,c.name))}!L(h)&&await W(h,i,n)}}return n.valid},be=()=>{for(const t of f.unMount){const i=m(a,t);i&&(i._f.refs?i._f.refs.every(n=>!ke(n)):!ke(i._f.ref))&&_e(t)}f.unMount=new Set},b=(t,i)=>!s.disabled&&(t&&i&&A(l,t,i),!te(Me(),o)),V=(t,i,n)=>Lt(t,f,{...u.mount?l:k(i)?o:B(t)?{[t]:i}:i},n,i),O=t=>Ne(m(u.mount?l:o,t,s.shouldUnregister?m(o,t,[]):[])),M=(t,i,n={})=>{const y=m(a,t);let d=i;if(y){const c=y._f;c&&(!c.disabled&&A(l,t,ct(i,c)),d=ve(c.ref)&&I(i)?"":i,nt(c.ref)?[...c.ref.options].forEach(h=>h.selected=d.includes(h.value)):c.refs?he(c.ref)?c.refs.forEach(h=>{(!h.defaultChecked||!h.disabled)&&(Array.isArray(d)?h.checked=!!d.find(_=>_===h.value):h.checked=d===h.value||!!d)}):c.refs.forEach(h=>h.checked=h.value===d):Oe(c.ref)?c.ref.value="":(c.ref.value=d,c.ref.type||v.state.next({name:t,values:j(l)})))}(n.shouldDirty||n.shouldTouch)&&oe(t,d,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&de(t)},H=(t,i,n)=>{for(const y in i){if(!i.hasOwnProperty(y))return;const d=i[y],c=t+"."+y,h=m(a,c);(f.array.has(t)||E(d)||h&&!h._f)&&!ie(d)?H(c,d,n):M(c,d,n)}},U=(t,i,n={})=>{const y=m(a,t),d=f.array.has(t),c=j(i);A(l,t,c),d?(v.array.next({name:t,values:j(l)}),(p.isDirty||p.dirtyFields||N.isDirty||N.dirtyFields)&&n.shouldDirty&&v.state.next({name:t,dirtyFields:ne(o,l),isDirty:b(t,c)})):y&&!y._f&&!I(c)?H(t,c,n):M(t,c,n),et(t,f)?v.state.next({...r,name:t,values:j(l)}):v.state.next({name:u.mount?t:void 0,values:j(l)})},ue=async t=>{u.mount=!0;const i=t.target;let n=i.name,y=!0;const d=m(a,n),c=F=>{y=Number.isNaN(F)||ie(F)&&isNaN(F.getTime())||te(F,m(l,n,F))},h=Xe(s.mode),_=Xe(s.reValidateMode);if(d){let F,T;const se=i.type?Qe(d._f):Nt(t),ee=t.type===Ke.BLUR||t.type===Ke.FOCUS_OUT,xt=!Kt(d._f)&&!s.resolver&&!m(r.errors,n)&&!d._f.deps||Jt(ee,m(r.touchedFields,n),r.isSubmitted,_,h),we=et(n,f,ee);A(l,n,se),ee?(!i||!i.readOnly)&&(d._f.onBlur&&d._f.onBlur(t),w&&w(0)):d._f.onChange&&d._f.onChange(t);const Ae=oe(n,se,ee),Vt=!L(Ae)||we;if(!ee&&v.state.next({name:n,type:t.type,values:j(l)}),xt)return(p.isValid||N.isValid)&&(s.mode==="onBlur"?ee&&z():ee||z()),Vt&&v.state.next({name:n,...we?{}:Ae});if(!ee&&we&&v.state.next({...r}),s.resolver){const{errors:We}=await re([n]);if(q([n]),c(se),y){const _t=tt(r.errors,a,n),He=tt(We,a,_t.name||n);F=He.error,n=He.name,T=L(We)}}else q([n],!0),F=(await st(d,f.disabled,l,Y,s.shouldUseNativeValidation))[n],q([n]),c(se),y&&(F?T=!1:(p.isValid||N.isValid)&&(T=await W(a,!0)));y&&(d._f.deps&&(!Array.isArray(d._f.deps)||d._f.deps.length>0)&&de(d._f.deps),ge(n,T,F,Ae))}},ce=(t,i)=>{if(m(r.errors,i)&&t.focus)return t.focus(),1},de=async(t,i={})=>{let n,y;const d=ye(t);if(s.resolver){const c=await ae(k(t)?t:d);n=L(c),y=t?!d.some(h=>m(c,h)):n}else t?(y=(await Promise.all(d.map(async c=>{const h=m(a,c);return await W(h&&h._f?{[c]:h}:h)}))).every(Boolean),!(!y&&!r.isValid)&&z()):y=n=await W(a);return v.state.next({...!B(t)||(p.isValid||N.isValid)&&n!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:n}:{},errors:r.errors}),i.shouldFocus&&!y&&me(a,ce,t?d:f.mount),y},Me=(t,i)=>{let n={...u.mount?l:o};return i&&(n=lt(i.dirtyFields?r.dirtyFields:r.touchedFields,n)),k(t)?n:B(t)?m(n,t):t.map(y=>m(n,y))},Te=(t,i)=>({invalid:!!m((i||r).errors,t),isDirty:!!m((i||r).dirtyFields,t),error:m((i||r).errors,t),isValidating:!!m(r.validatingFields,t),isTouched:!!m((i||r).touchedFields,t)}),ft=t=>{t&&ye(t).forEach(i=>D(r.errors,i)),v.state.next({errors:t?r.errors:{}})},Re=(t,i,n)=>{const y=(m(a,t,{_f:{}})._f||{}).ref,d=m(r.errors,t)||{},{ref:c,message:h,type:_,...F}=d;A(r.errors,t,{...F,...i,ref:y}),v.state.next({name:t,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&y&&y.focus&&y.focus()},yt=(t,i)=>$(t)?v.state.subscribe({next:n=>"values"in n&&t(V(void 0,i),n)}):V(t,i,!0),Le=t=>v.state.subscribe({next:i=>{Gt(t.name,i.name,t.exact)&&zt(i,t.formState||p,vt,t.reRenderRoot)&&t.callback({values:{...l},...r,...i,defaultValues:o})}}).unsubscribe,mt=t=>(u.mount=!0,N={...N,...t.formState},Le({...t,formState:{...J,...t.formState}})),_e=(t,i={})=>{for(const n of t?ye(t):f.mount)f.mount.delete(n),f.array.delete(n),i.keepValue||(D(a,n),D(l,n)),!i.keepError&&D(r.errors,n),!i.keepDirty&&D(r.dirtyFields,n),!i.keepTouched&&D(r.touchedFields,n),!i.keepIsValidating&&D(r.validatingFields,n),!s.shouldUnregister&&!i.keepDefaultValue&&D(o,n);v.state.next({values:j(l)}),v.state.next({...r,...i.keepDirty?{isDirty:b()}:{}}),!i.keepIsValid&&z()},Ie=({disabled:t,name:i})=>{if(G(t)&&u.mount||t||f.disabled.has(i)){const d=f.disabled.has(i)!==!!t;t?f.disabled.add(i):f.disabled.delete(i),d&&u.mount&&!u.action&&z()}},Fe=(t,i={})=>{let n=m(a,t);const y=G(i.disabled)||G(s.disabled);return A(a,t,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:t}},name:t,mount:!0,...i}}),f.mount.add(t),n?Ie({disabled:G(i.disabled)?i.disabled:s.disabled,name:t}):C(t,!0,i.value),{...y?{disabled:i.disabled||s.disabled}:{},...s.progressive?{required:!!i.required,min:fe(i.min),max:fe(i.max),minLength:fe(i.minLength),maxLength:fe(i.maxLength),pattern:fe(i.pattern)}:{},name:t,onChange:ue,onBlur:ue,ref:d=>{if(d){Fe(t,i),n=m(a,t);const c=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,h=Ut(c),_=n._f.refs||[];if(h?_.find(F=>F===c):c===n._f.ref)return;A(a,t,{_f:{...n._f,...h?{refs:[..._.filter(ke),c,...Array.isArray(m(o,t))?[{}]:[]],ref:{type:c.type,name:t}}:{ref:c}}}),C(t,!1,void 0,c)}else n=m(a,t,{}),n._f&&(n._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(Ot(f.array,t)&&u.action)&&f.unMount.add(t)}}},pe=()=>s.shouldFocusError&&me(a,ce,f.mount),ht=t=>{G(t)&&(v.state.next({disabled:t}),me(a,(i,n)=>{const y=m(a,n);y&&(i.disabled=y._f.disabled||t,Array.isArray(y._f.refs)&&y._f.refs.forEach(d=>{d.disabled=y._f.disabled||t}))},0,!1))},Pe=(t,i)=>async n=>{let y;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let d=j(l);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:c,values:h}=await re();q(),r.errors=c,d=j(h)}else await W(a);if(f.disabled.size)for(const c of f.disabled)D(d,c);if(D(r.errors,"root"),L(r.errors)){v.state.next({errors:{}});try{await t(d,n)}catch(c){y=c}}else i&&await i({...r.errors},n),pe(),setTimeout(pe);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:L(r.errors)&&!y,submitCount:r.submitCount+1,errors:r.errors}),y)throw y},gt=(t,i={})=>{m(a,t)&&(k(i.defaultValue)?U(t,j(m(o,t))):(U(t,i.defaultValue),A(o,t,j(i.defaultValue))),i.keepTouched||D(r.touchedFields,t),i.keepDirty||(D(r.dirtyFields,t),r.isDirty=i.defaultValue?b(t,j(m(o,t))):b()),i.keepError||(D(r.errors,t),p.isValid&&z()),v.state.next({...r}))},Ue=(t,i={})=>{const n=t?j(t):o,y=j(n),d=L(t),c=d?o:y;if(i.keepDefaultValues||(o=n),!i.keepValues){if(i.keepDirtyValues){const h=new Set([...f.mount,...Object.keys(ne(o,l))]);for(const _ of Array.from(h)){const F=m(r.dirtyFields,_),T=m(l,_),se=m(c,_);F&&!k(T)?A(c,_,T):!F&&!k(se)&&U(_,se)}}else{if(Ee&&k(t))for(const h of f.mount){const _=m(a,h);if(_&&_._f){const F=Array.isArray(_._f.refs)?_._f.refs[0]:_._f.ref;if(ve(F)){const T=F.closest("form");if(T){T.reset();break}}}}if(i.keepFieldsRef)for(const h of f.mount)U(h,m(c,h));else a={}}l=s.shouldUnregister?i.keepDefaultValues?j(o):{}:j(c),v.array.next({values:{...c}}),v.state.next({values:{...c}})}f={mount:i.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!p.isValid||!!i.keepIsValid||!!i.keepDirtyValues||!s.shouldUnregister&&!L(c),u.watch=!!s.shouldUnregister,u.keepIsValid=!!i.keepIsValid,u.action=!1,i.keepErrors||(r.errors={}),v.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:d?!1:i.keepDirty?r.isDirty:!!(i.keepDefaultValues&&!te(t,o)),isSubmitted:i.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:d?{}:i.keepDirtyValues?i.keepDefaultValues&&l?ne(o,l):r.dirtyFields:i.keepDefaultValues&&t?ne(o,t):i.keepDirty?r.dirtyFields:{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Be=(t,i)=>Ue($(t)?t(l):t,{...s.resetOptions,...i}),bt=(t,i={})=>{const n=m(a,t),y=n&&n._f;if(y){const d=y.refs?y.refs[0]:y.ref;d.focus&&setTimeout(()=>{d.focus(),i.shouldSelect&&$(d.select)&&d.select()})}},vt=t=>{r={...r,...t}},qe={control:{register:Fe,unregister:_e,getFieldState:Te,handleSubmit:Pe,setError:Re,_subscribe:Le,_runSchema:re,_updateIsValidating:q,_focusError:pe,_getWatch:V,_getDirty:b,_setValid:z,_setFieldArray:x,_setDisabledField:Ie,_setErrors:X,_getFieldArray:O,_reset:Ue,_resetDefaultValues:()=>$(s.defaultValues)&&s.defaultValues().then(t=>{Be(t,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:be,_disableForm:ht,_subjects:v,_proxyFormState:p,get _fields(){return a},get _formValues(){return l},get _state(){return u},set _state(t){u=t},get _defaultValues(){return o},get _names(){return f},set _names(t){f=t},get _formState(){return r},get _options(){return s},set _options(t){s={...s,...t}}},subscribe:mt,trigger:de,register:Fe,handleSubmit:Pe,watch:yt,setValue:U,getValues:Me,reset:Be,resetField:gt,clearErrors:ft,unregister:_e,setError:Re,setFocus:bt,getFieldState:Te};return{...qe,formControl:qe}}function er(e={}){const s=R.useRef(void 0),r=R.useRef(void 0),[a,o]=R.useState({isDirty:!1,isValidating:!1,isLoading:$(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:$(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:a},e.defaultValues&&!$(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...f}=Zt(e);s.current={...f,formState:a}}const l=s.current.control;return l._options=e,Rt(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(f=>({...f,isReady:!0})),l._formState.isReady=!0,u},[l]),R.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),R.useEffect(()=>{e.mode&&(l._options.mode=e.mode),e.reValidateMode&&(l._options.reValidateMode=e.reValidateMode)},[l,e.mode,e.reValidateMode]),R.useEffect(()=>{e.errors&&(l._setErrors(e.errors),l._focusError())},[l,e.errors]),R.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,e.shouldUnregister]),R.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==a.isDirty&&l._subjects.state.next({isDirty:u})}},[l,a.isDirty]),R.useEffect(()=>{var u;e.values&&!te(e.values,r.current)?(l._reset(e.values,{keepFieldsRef:!0,...l._options.resetOptions}),!((u=l._options.resetOptions)===null||u===void 0)&&u.keepIsValid||l._setValid(),r.current=e.values,o(f=>({...f}))):l._resetDefaultValues()},[l,e.values]),R.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),s.current.formState=R.useMemo(()=>Tt(a,l),[l,a]),s.current}function tr({field:e,register:s,errors:r,disabled:a}){var f,w;const o=r[e.name],l="w-full border border-gray-300 px-3 py-2 text-gray-900 bg-white placeholder-gray-400 focus:outline-none focus:border-blueprint-blue focus:ring-1 focus:ring-blueprint-blue disabled:bg-gray-100 disabled:text-gray-400",u={};return e.required&&(u.required=`${e.label} is required`),e.type==="email"&&(u.pattern={value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}),e.type==="number"&&e.min!==void 0&&(u.min={value:e.min,message:`Minimum value is ${e.min}`},u.valueAsNumber=!0),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&g.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.type==="textarea"?g.jsx("textarea",{id:e.name,rows:3,className:l,placeholder:e.placeholder,disabled:a,...s(e.name,u)}):e.type==="select"?g.jsxs("select",{id:e.name,className:l,disabled:a,...s(e.name,u),children:[g.jsx("option",{value:"",children:"Select..."}),(f=e.options)==null?void 0:f.map(S=>g.jsx("option",{value:S.value,children:S.label},S.value))]}):e.type==="checkbox-group"?g.jsx("div",{className:"space-y-2",children:(w=e.options)==null?void 0:w.map(S=>g.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[g.jsx("input",{type:"checkbox",value:S.value,disabled:a,...s(e.name),className:"h-4 w-4 border-gray-300 text-blueprint-blue focus:ring-blueprint-blue"}),S.label]},S.value))}):e.type==="checkbox"?g.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[g.jsx("input",{type:"checkbox",disabled:a,...s(e.name),className:"h-4 w-4 border-gray-300 text-blueprint-blue focus:ring-blueprint-blue"}),e.label]}):e.type==="range"?g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-sm text-gray-500",children:e.min??1}),g.jsx("input",{id:e.name,type:"range",min:e.min??1,max:e.max??5,defaultValue:e.defaultValue!==void 0?Number(e.defaultValue):3,className:"flex-1 accent-blueprint-blue",disabled:a,...s(e.name,{valueAsNumber:!0})}),g.jsx("span",{className:"text-sm text-gray-500",children:e.max??5})]}):g.jsx("input",{id:e.name,type:e.type,className:l,placeholder:e.placeholder,disabled:a,defaultValue:e.defaultValue!==void 0?String(e.defaultValue):void 0,...s(e.name,u)}),o&&g.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.message})]})}function rr({section:e,form:s}){const[r,a]=Ft.useState(!1);return g.jsxs("div",{className:`bg-white border border-gray-300 border-t-4 border-t-blueprint-blue p-6 ${r?"opacity-50":""}`,children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e.title}),e.subtitle&&g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.subtitle})]}),e.canMarkNA&&g.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-500 shrink-0 ml-4",children:[g.jsx("input",{type:"checkbox",checked:r,onChange:o=>a(o.target.checked),className:"h-4 w-4 border-gray-300 text-gray-500"}),"N/A"]})]}),g.jsx("div",{className:"space-y-4",children:e.fields.map(o=>g.jsx(tr,{field:o,register:s.register,errors:s.formState.errors,disabled:r},o.name))})]})}const it={1:[.8,.2,0,0],2:[.6,.3,.1,0],3:[.4,.4,.2,0],4:[.2,.4,.3,.1],5:[.1,.2,.4,.3]};function sr(e,s,r){const a=e||0,o=Math.min(5,Math.max(1,Math.round(s))),u=(r??it)[o]??it[3]??[.4,.4,.2,0],[f,w,S,J]=u;return{simple:Math.floor(a*f),medium:Math.floor(a*w),complex:Math.floor(a*S),veryComplex:Math.floor(a*J)}}function ir(e,s){if(s.calculate)return s.calculate(e);const r=s.objectCountFields.reduce((u,f)=>u+(Number(e[f])||0),0),a=Number(e[s.complexityField])||3,o=sr(r,a,s.distributionWeights),l=o.simple*s.hoursPerObject.simple+o.medium*s.hoursPerObject.medium+o.complex*s.hoursPerObject.complex+o.veryComplex*s.hoursPerObject.veryComplex;return{totalObjects:r,breakdown:o,estimatedHours:l,estimatedCost:{low:l*s.hourlyRate.low,high:l*s.hourlyRate.high}}}function mr(){const{platform:e}=St(),s=Dt(),{showSuccess:r,showError:a}=kt(),o=e?pt(e):void 0,l=e?wt(e):void 0,u=er({mode:"onBlur"});if(!o||!l)return g.jsx(Et,{to:"/migration",replace:!0});function f(w){try{const S=At(l.platform,l.romConfig),J=ir(w,S),p={platform:l.platform,formData:w,rom:J,timestamp:new Date().toISOString()};sessionStorage.setItem("lastAssessmentReport",JSON.stringify(p)),r("Assessment Saved","Fine tune your estimate now on the ROM Calculator."),s("/migration/calculator")}catch{a("Submission Failed","There was an error processing your assessment.")}}return g.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[g.jsx("button",{onClick:()=>s("/migration"),className:"text-sm text-blueprint-blue hover:underline mb-6 inline-block",children:"â† Back to Migration Suite"}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold",style:{color:l.brandColor},children:l.title}),g.jsx("p",{className:"text-gray-500 mt-2",children:l.subtitle})]}),g.jsxs("form",{onSubmit:u.handleSubmit(f),className:"space-y-6",children:[l.sections.map(w=>g.jsx(rr,{section:w,form:u},w.id)),g.jsxs("div",{className:"flex gap-4",children:[g.jsx($e,{type:"submit",children:"Generate ROM Estimate"}),g.jsx($e,{type:"button",variant:"secondary",onClick:()=>u.reset(),children:"Reset Form"})]})]})]})}export{mr as default};
