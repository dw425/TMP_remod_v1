import{a as b,j as e}from"./state-Cs2e8pUQ.js";import{L as w}from"./vendor-D7HEtn7k.js";import{u as E}from"./useCart-DHai9L56.js";import{b as S,c as T,p as C,d as q,a as L,E as v,R as P}from"./index-HBtRV3iF.js";import{f as d,u as M}from"./pageTagging-hsg3qE2x.js";import{S as F}from"./SEO-Du-LTs__.js";import{g as R}from"./downloadService-CoA7xjay.js";import"./charts-HkUfyz1_.js";function A({cartItems:r,estimatedTotal:o,onClose:s,onSuccess:f}){S(!0);const[m,p]=b.useState(!1),k=r.map(a=>`• ${a.title} (x${a.quantity}) - ${d(a.price)}`).join(`
`),g=new Date().toISOString().split("T")[0];b.useEffect(()=>{const a=n=>{n.key==="Escape"&&s()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[s]);const j=async a=>{a.preventDefault(),p(!0);const n=a.currentTarget,i=new FormData(n);try{if((await fetch("https://formspree.io/f/xwpgdwbd",{method:"POST",body:i,headers:{Accept:"application/json"}})).ok){const c=T.getState().user,u=c==null?void 0:c.id;if(u){r.forEach(x=>{const h=C.find(O=>O.id===x.id);h!=null&&h.slug&&R(u,h.slug)});const y=i.get("po_number")||void 0,t=i.get("legal_name")||"",l=i.get("email")||"";q({id:crypto.randomUUID(),userId:u,email:l,company:t,items:r.map(x=>({title:x.title,type:x.type||"Software",price:x.price,billing:x.billing||"monthly"})),total:parseFloat(o.replace(/[^0-9.]/g,""))||0,status:"submitted",submittedAt:new Date().toISOString(),poNumber:y})}n.reset(),s(),f()}else alert("Oops! There was a problem submitting your form.")}catch{alert("Network error. Please try again.")}finally{p(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-label":"Request Quote / PO",children:[e.jsx("div",{className:"fixed inset-0",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:s,"aria-hidden":"true"}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 w-full max-w-4xl max-h-[95vh] flex flex-col border-t-8 border-blueprint-blue shadow-2xl",children:[e.jsxs("header",{className:"p-6 border-b border-gray-100 dark:border-slate-700 flex justify-between items-center flex-shrink-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Request Quote / PO"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 text-3xl","aria-label":"Close",children:"×"})]}),e.jsx("div",{className:"overflow-y-auto",children:e.jsxs("form",{onSubmit:j,className:"p-8 text-sm",children:[e.jsx("input",{type:"hidden",name:"cart_contents",value:JSON.stringify(r)}),e.jsx("input",{type:"hidden",name:"estimated_total",value:o}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-number",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"PO Number (Optional)"}),e.jsx("input",{id:"po-number",type:"text",name:"po_number",className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-date",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Date"}),e.jsx("input",{id:"po-date",type:"date",name:"po_date",required:!0,defaultValue:g,className:"w-full border border-gray-300 dark:border-slate-600 p-2 text-gray-900 dark:text-gray-100 bg-white dark:bg-slate-800 focus:border-blueprint-blue focus:outline-none"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("fieldset",{className:"border border-gray-200 dark:border-slate-700 p-4 bg-gray-50 dark:bg-slate-800",children:[e.jsx("legend",{className:"text-sm font-bold text-blueprint-blue px-2 uppercase tracking-wide",children:"1. Customer Information"}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-legal-name",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Legal Entity Name"}),e.jsx("input",{id:"po-legal-name",type:"text",name:"legal_name",required:!0,className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-email",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Contact Email"}),e.jsx("input",{id:"po-email",type:"email",name:"email",required:!0,className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{htmlFor:"po-address",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Street Address"}),e.jsx("input",{id:"po-address",type:"text",name:"address",required:!0,className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-city",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"City"}),e.jsx("input",{id:"po-city",type:"text",name:"city",required:!0,className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-state",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"State"}),e.jsx("input",{id:"po-state",type:"text",name:"state",required:!0,maxLength:2,className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-zip",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Zip Code"}),e.jsx("input",{id:"po-zip",type:"text",name:"zip",required:!0,maxLength:5,className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("fieldset",{className:"border border-gray-200 dark:border-slate-700 p-4 bg-gray-50 dark:bg-slate-800",children:[e.jsx("legend",{className:"text-sm font-bold text-blueprint-blue px-2 uppercase tracking-wide",children:"2. Order Summary"}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-summary",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Items in Cart"}),e.jsx("textarea",{id:"po-summary",name:"poProductSummary",readOnly:!0,value:k,className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-gray-100 dark:bg-slate-700 text-gray-900 dark:text-gray-100 h-24 font-mono text-xs resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-start-date",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Requested Start Date"}),e.jsx("input",{id:"po-start-date",type:"date",name:"start_date",required:!0,className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]})]})]}),e.jsxs("fieldset",{className:"border border-gray-200 dark:border-slate-700 p-4 bg-gray-50 dark:bg-slate-800",children:[e.jsx("legend",{className:"text-sm font-bold text-blueprint-blue px-2 uppercase tracking-wide",children:"3. Deployment"}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-cloud",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Cloud Provider"}),e.jsxs("select",{id:"po-cloud",name:"deployment_location",className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none",children:[e.jsx("option",{value:"AWS",children:"AWS"}),e.jsx("option",{value:"Azure",children:"Azure"}),e.jsx("option",{value:"GCP",children:"GCP"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"po-tech-contact",className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Technical Contact Email (Optional)"}),e.jsx("input",{id:"po-tech-contact",type:"email",name:"tech_contact",className:"w-full border border-gray-300 dark:border-slate-600 p-2 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 focus:border-blueprint-blue focus:outline-none"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 text-xs font-bold uppercase text-gray-500 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-8 py-3 bg-blueprint-blue text-white font-bold uppercase tracking-widest text-[10px] hover:bg-blue-800 transition-colors disabled:opacity-50",children:m?"Processing...":"Submit Request"})]})]})})]})]})}function D({onClose:r}){return S(!0),b.useEffect(()=>{const o=s=>{s.key==="Escape"&&r()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[r]),e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-label":"Order Confirmation",children:[e.jsx("div",{className:"fixed inset-0",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:r,"aria-hidden":"true"}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 shadow-xl w-full max-w-md text-center p-12 border-t-8 border-green-500",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 bg-green-100 dark:bg-green-900/30 mb-6",style:{borderRadius:"9999px"},children:e.jsx("svg",{className:"h-10 w-10 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Order Received!"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-sm",children:"Thank you for your request. Our team will process your PO and email you the confirmation and next steps shortly."}),e.jsx("button",{onClick:r,className:"w-full bg-black text-white font-bold py-3 uppercase tracking-widest text-xs hover:bg-gray-800",children:"Close"})]})]})}function V(){const{items:r,add:o,remove:s,decrement:f,clear:m,totals:p}=E(),[k,g]=b.useState(!1),[j,a]=b.useState(!1),n=L();M({pageName:"Cart",pageType:"cart"});const i=p.monthlyTotal,N=p.annualTotal,c=i+N,u=()=>{m(),a(!0)},y=b.useMemo(()=>{const t=new Set(r.map(l=>l.id));return C.filter(l=>l.type==="tool"&&l.priceMonthly>0&&!t.has(l.id)).slice(0,3)},[r]);return e.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx(F,{title:"Your Cart",description:"Review your selected Blueprint Marketplace items.",canonical:"/cart"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8",children:"Your Quote Cart"}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-100 dark:border-blue-800 text-sm text-blue-800 dark:text-blue-200 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blueprint-blue shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"All pricing is for estimation purposes. Final quotes will be provided by our sales team."]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsx("div",{className:"sharp-card overflow-hidden",children:r.length>0?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Product / Service"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Billing"}),e.jsx("th",{className:"text-center px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider"})]})}),e.jsx("tbody",{children:r.map(t=>{const l=t.billing==="monthly"?`${d(t.price*t.quantity)} / mo`:d(t.price*t.quantity);return e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 px-6 border-b border-gray-100 dark:border-slate-700",children:e.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:t.title})}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-100 dark:border-slate-700 text-sm text-gray-500 dark:text-gray-400",children:t.type||"Software"}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-100 dark:border-slate-700 text-sm text-gray-500 dark:text-gray-400 capitalize",children:t.billing||"-"}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-100 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>f(t.id),className:"w-7 h-7 flex items-center justify-center border border-gray-300 dark:border-slate-600 text-gray-500 dark:text-gray-400 hover:border-blueprint-blue hover:text-blueprint-blue transition-colors text-sm font-bold","aria-label":"Decrease quantity",children:"−"}),e.jsx("span",{className:"w-8 text-center text-sm font-bold text-gray-900 dark:text-gray-100",children:t.quantity}),e.jsx("button",{onClick:()=>o({id:t.id,title:t.title,type:t.type,billing:t.billing,price:t.price}),className:"w-7 h-7 flex items-center justify-center border border-gray-300 dark:border-slate-600 text-gray-500 dark:text-gray-400 hover:border-blueprint-blue hover:text-blueprint-blue transition-colors text-sm font-bold","aria-label":"Increase quantity",children:"+"})]})}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-100 dark:border-slate-700 font-mono text-sm text-gray-900 dark:text-gray-100",children:l}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-100 dark:border-slate-700",children:e.jsx("button",{onClick:()=>{n(v.CART_ITEM_REMOVED,{productId:t.id,productName:t.title}),s(t.id)},className:"text-gray-400 hover:text-red-600 transition-colors","aria-label":`Remove ${t.title}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},t.id)})})]}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-2",children:"Your cart is currently empty."}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mb-6",children:"Add items from the marketplace to request a quote."}),e.jsx(w,{to:P.HOME,className:"bg-blueprint-blue text-white font-bold py-3 px-6 uppercase tracking-widest text-xs hover:bg-blue-800 transition-colors inline-block btn-rounded",children:"Browse Marketplace"})]})})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsxs("div",{className:"sharp-card p-6 sticky top-28",children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 mb-4",children:"Summary"}),e.jsxs("div",{className:"space-y-3 mb-6 border-b border-gray-100 dark:border-slate-700 pb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Monthly Recurring"}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-100",children:d(i)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"One-Time Implementation"}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-100",children:d(N)})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Total Est."}),e.jsx("span",{className:"text-xl font-bold text-blueprint-blue",children:d(c)})]}),e.jsx("button",{onClick:()=>{r.length!==0&&(n(v.CHECKOUT_STARTED,{itemCount:r.length,total:c}),g(!0))},disabled:r.length===0,className:"w-full bg-blueprint-blue text-white font-bold py-4 uppercase tracking-widest text-xs hover:bg-blue-800 transition-colors btn-rounded disabled:opacity-40 disabled:cursor-not-allowed",children:"Request Quote / PO"})]})})]}),y.length>0&&e.jsxs("section",{className:"mt-16 border-t border-gray-200 dark:border-slate-700 pt-10",children:[e.jsx("h2",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 mb-6",children:"You Might Also Like"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:y.map(t=>e.jsxs(w,{to:`/products/${t.slug}`,className:"sharp-card p-6 hover:shadow-lg transition-all group",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 group-hover:text-blueprint-blue transition-colors mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:[d(t.priceMonthly),"/mo"]}),e.jsx("span",{className:"text-xs font-bold text-blueprint-blue uppercase tracking-wide",children:"View Details →"})]})]},t.id))})]}),k&&e.jsx(A,{cartItems:r,estimatedTotal:d(c),onClose:()=>g(!1),onSuccess:u}),j&&e.jsx(D,{onClose:()=>a(!1)})]})}export{V as default};
