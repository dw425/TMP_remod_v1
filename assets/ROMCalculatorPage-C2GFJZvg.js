import{a as r,j as e}from"./state-Cs2e8pUQ.js";import{g as ve}from"./platforms-C7wVRla3.js";import{g as Ne}from"./index-B6_ClUOr.js";import{e as E,s as Se}from"./index-BFBTFrn8.js";import{u as ke}from"./useAlerts-C9P_ItF6.js";import{u as Me}from"./vendor-CXKupAPx.js";const Ee={contactSales:E.VITE_FORMSPREE_CONTACT,poCheckout:E.VITE_FORMSPREE_PO,aiFactory:E.VITE_FORMSPREE_AIFACTORY,romCalculator:E.VITE_FORMSPREE_CALC};async function Fe(n,i){const c=Ee[n],l=Se(i),o=await fetch(`https://formspree.io/f/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!o.ok)throw new Error("Form submission failed");return o.json()}const Oe={table:{s:2,m:6,c:16,v:40},view:{s:2,m:8,c:24,v:40},proc:{s:4,m:12,c:32,v:60},func:{s:4,m:12,c:32,v:60},etl:{s:6,m:20,c:50,v:100},script:{s:4,m:16,c:40,v:80},orch:{s:2,m:6,c:16,v:32},bi:{s:4,m:16,c:40,v:80},excel:{s:2,m:8,c:24,v:60},report:{s:4,m:12,c:32,v:80}},Re={snowflake:.8,databricks:.8,synapse:.85,"sql-server":.9,oracle:1,netezza:1.1,teradata:1.15,sap:1.2,hadoop:1.25,gcp:1,informatica:1,redshift:.9,"unity-catalog":.8,talend:1},O=[{key:"table",label:"Tables"},{key:"view",label:"Views"},{key:"proc",label:"Stored Procs"},{key:"func",label:"Functions"}],R=[{key:"etl",label:"ETL Pipelines"},{key:"script",label:"Scripts"},{key:"orch",label:"Orchestration"}],T=[{key:"bi",label:"BI Dashboards"},{key:"excel",label:"Excel Sheets"},{key:"report",label:"Reports"}],Te={1:[.8,.2,0,0],2:[.6,.3,.1,0],3:[.4,.4,.2,0],4:[.2,.4,.3,.1],5:[.1,.2,.4,.3]};function Ae(n,i){const c=Math.min(5,Math.max(1,Math.round(i||3))),l=Te[c]??[.4,.4,.2,0];return{simple:Math.round(n*(l[0]??0)),medium:Math.round(n*(l[1]??0)),complex:Math.round(n*(l[2]??0)),veryComplex:Math.round(n*(l[3]??0))}}const Ie={tableCount:{row:"table",complexityField:"tableComplexity"},viewCount:{row:"view",complexityField:"viewComplexity"},spCount:{row:"proc",complexityField:"spComplexity"},totalProcs:{row:"proc",complexityField:"procComplexity"},plsqlObjectCount:{row:"proc",complexityField:"procComplexity"},macroCount:{row:"proc"},udfCount:{row:"func",complexityField:"udfComplexity"},udfTotalCount:{row:"func",complexityField:"udfComplexity"},funcCount:{row:"func",complexityField:"funcComplexity"},functionCount:{row:"func"},abapCount:{row:"func",complexityField:"abapComplexity"},pipelineCount:{row:"etl",complexityField:"ingestComplexity"},dataflowJobCount:{row:"etl"},etlCount:{row:"etl",complexityField:"etlComplexity"},mappingCount:{row:"etl",complexityField:"mappingComplexity"},jobCount:{row:"etl"},dataFlowCount:{row:"etl",complexityField:"dataFlowComplexity"},bwObjectCount:{row:"etl",complexityField:"bwComplexity"},scriptCount:{row:"script",complexityField:"scriptComplexity"},totalScripts:{row:"script",complexityField:"scriptComplexity"},notebookCount:{row:"script",complexityField:"notebookComplexity"},bteqCount:{row:"script",complexityField:"scriptComplexity"},fastloadCount:{row:"script"},tptCount:{row:"script"},routineCount:{row:"script",complexityField:"routineComplexity"},sessionCount:{row:"script"},taskCount:{row:"orch",complexityField:"orchComplexity"},composerDagCount:{row:"orch"},orchCount:{row:"orch",complexityField:"orchComplexity"},dagCount:{row:"orch",complexityField:"orchComplexity"},triggerCount:{row:"orch",complexityField:"triggerComplexity"},workflowCount:{row:"orch",complexityField:"workflowComplexity"}};function Pe(n){const i={};if([...O,...R,...T].forEach(l=>{i[l.key]={simple:0,medium:0,complex:0,veryComplex:0}}),!n)return i;const c={};for(const[l,o]of Object.entries(Ie)){const m=Number(n[l])||0;if(m<=0)continue;c[o.row]||(c[o.row]={total:0,complexity:0,complexityCount:0});const p=c[o.row];if(p.total+=m,o.complexityField){const s=Number(n[o.complexityField]);s>0&&(p.complexity+=s,p.complexityCount+=1)}}for(const[l,o]of Object.entries(c)){if(!i[l])continue;const m=o.complexityCount>0?o.complexity/o.complexityCount:3;i[l]=Ae(o.total,m)}return i}function Ve(){var G,K,X,Q;const n=Me(),{showSuccess:i,showError:c}=ke(),[l,o]=r.useState(!1),[m,p]=r.useState(!1),s=r.useMemo(()=>{const t=sessionStorage.getItem("lastAssessmentReport");if(!t)return null;try{return JSON.parse(t)}catch{return null}},[]),b=s?ve(s.platform):void 0,[q,se]=r.useState(String(((G=s==null?void 0:s.formData)==null?void 0:G.projectName)??"")),[z,oe]=r.useState(String(((K=s==null?void 0:s.formData)==null?void 0:K.stakeholder)??"")),[Y,le]=r.useState(String(((X=s==null?void 0:s.formData)==null?void 0:X.contactEmail)??"")),[h,ae]=r.useState(()=>Pe(s==null?void 0:s.formData)),J=Number((Q=s==null?void 0:s.formData)==null?void 0:Q.overallComplexity)||3,[A,re]=r.useState(J),[I,ne]=r.useState(3),[P,ie]=r.useState(3),[L,ce]=r.useState(J),[w,me]=r.useState(0),[C,de]=r.useState(0),[U,j]=r.useState(""),[xe,v]=r.useState("text-green-700"),[pe,N]=r.useState("bg-green-600"),[ue,S]=r.useState("25%");function D(t,a,x){ae(y=>{const g=y[t]??{simple:0,medium:0,complex:0,veryComplex:0},d={...y};return d[t]={...g,[a]:x},d})}function be(){let t=0,a=0,x=0;for(const[je,M]of Object.entries(Oe)){const Z=h[je];if(!Z)continue;const{simple:ee,medium:te,complex:B,veryComplex:W}=Z;t+=ee*M.s+te*M.m+B*M.c+W*M.v,a+=ee+te+B+W,x+=B+W}const y=Re[(s==null?void 0:s.platform)??""]??1,d=1.25-((A+I+P)/3-1)*.1125,u=.8+(L-1)*.1125,f=Math.ceil(t*y*d*u),Ce=Math.ceil(f*.4);me(f),de(Ce);const $=f*(1+(a>0?x/a:0));$>25e3?(j("TRANSFORMATIONAL"),v("text-red-900"),N("bg-red-900"),S("100%")):$>1e4?(j("HIGH COMPLEXITY"),v("text-red-600"),N("bg-red-600"),S("75%")):$>2500?(j("MODERATE"),v("text-yellow-600"),N("bg-yellow-500"),S("50%")):(j("LOW"),v("text-green-700"),N("bg-green-600"),S("25%")),p(!0)}const _=s?Ne(s.platform):void 0;function ye(t){return t==null||t===""?"(not provided)":Array.isArray(t)?t.join(", "):typeof t=="boolean"?t?"Yes":"No":String(t)}function ge(){return!_||!(s!=null&&s.formData)?[]:_.sections.map(t=>({title:t.title,fields:t.fields.map(a=>({label:a.label,value:ye(s.formData[a.name])})).filter(a=>a.value!=="(not provided)"&&a.value!=="0"&&a.value!=="")})).filter(t=>t.fields.length>0)}const H=r.useMemo(ge,[_,s]);function he(){const t=[...O,...R,...T],a=[{title:"DATABASE LAYER",rows:O},{title:"INTEGRATION & CODE",rows:R},{title:"PRESENTATION LAYER",rows:T}],x=[];for(const g of a){x.push(`
--- ${g.title} ---`);for(const d of g.rows){const u=h[d.key];if(!u)continue;const f=u.simple+u.medium+u.complex+u.veryComplex;f>0&&x.push(`${d.label}: ${u.simple} Simple, ${u.medium} Medium, ${u.complex} Complex, ${u.veryComplex} V.Complex (Total: ${f})`)}}let y=0;for(const g of t){const d=h[g.key];d&&(y+=d.simple+d.medium+d.complex+d.veryComplex)}return x.push(`
TOTAL OBJECTS: ${y}`),x.join(`
`)}function fe(){const t=[];for(const a of H){t.push(`
=== ${a.title} ===`);for(const x of a.fields)t.push(`${x.label}: ${x.value}`)}return t.join(`
`)}async function we(){o(!0);try{const t=he(),a=fe();await Fe("romCalculator",{"Source Platform":(b==null?void 0:b.name)??(s==null?void 0:s.platform)??"Unknown","Project Name":q||"(not provided)","Primary Stakeholder":z||"(not provided)","Contact Email":Y||"(not provided)","Team Expertise (1-5)":A,"Tool Familiarity (1-5)":I,"Infrastructure Config (1-5)":P,"Env Complexity (1-5)":L,"ROM Object Inventory":t,"Complexity Rating":U,"Manual Effort (Hours)":w.toLocaleString(),"Manual Effort (Weeks)":Math.ceil(w/k),"Blueprint Accelerated (Hours)":C.toLocaleString(),"Blueprint Accelerated (Weeks)":Math.ceil(C/k),"Full Assessment Details":a,"Submitted At":new Date().toLocaleString()}),p(!1),i("Details Sent!","Our team has received your migration inventory and ROM estimate.")}catch{c("Submission Failed","Could not send the report. Please try again.")}finally{o(!1)}}const k=160;return e.jsxs("div",{className:"w-full max-w-[1200px] mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("button",{onClick:()=>n("/migration"),className:"text-sm text-blueprint-blue hover:underline mb-6 inline-block",children:"← Back to Migration Suite"}),e.jsxs("div",{className:"mb-10 border-b border-gray-200 pb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 tracking-tight mb-3",children:"Comprehensive Migration ROM Calculator"}),e.jsx("p",{className:"text-lg text-gray-600 font-medium",children:"Inventory your environment and assess maturity to generate a Rough Order of Magnitude (ROM) estimate."}),b&&e.jsxs("p",{className:"text-sm font-bold mt-2",style:{color:b.brandColor},children:["Source: ",b.name]})]}),H.length>0&&e.jsx(Le,{sections:H,platformColor:b==null?void 0:b.brandColor}),e.jsxs("div",{className:"bg-white border border-gray-300 shadow-sm mb-8",children:[e.jsx("div",{className:"bg-blueprint-blue text-white px-6 py-3 font-bold text-sm uppercase tracking-wide",children:"1. Organization & Tech Stack"}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"block mb-1 font-bold text-gray-900 text-sm",children:"Project Name"}),e.jsx("input",{type:"text",value:q,onChange:t=>se(t.target.value),className:"w-full px-3 py-2 border border-gray-400 text-sm focus:border-blueprint-blue focus:ring-1 focus:ring-blueprint-blue outline-none"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"block mb-1 font-bold text-gray-900 text-sm",children:"Primary Stakeholder"}),e.jsx("input",{type:"text",value:z,onChange:t=>oe(t.target.value),className:"w-full px-3 py-2 border border-gray-400 text-sm focus:border-blueprint-blue focus:ring-1 focus:ring-blueprint-blue outline-none"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"block mb-1 font-bold text-gray-900 text-sm",children:"Email"}),e.jsx("input",{type:"email",value:Y,onChange:t=>le(t.target.value),className:"w-full px-3 py-2 border border-gray-400 text-sm focus:border-blueprint-blue focus:ring-1 focus:ring-blueprint-blue outline-none"})]})]})})]}),e.jsx(V,{title:"2. Database Layer",rows:O,matrix:h,onUpdate:D}),e.jsx(V,{title:"3. Integration & Code",rows:R,matrix:h,onUpdate:D}),e.jsx(V,{title:"4. Presentation Layer",rows:T,matrix:h,onUpdate:D}),e.jsxs("div",{className:"bg-white border border-gray-300 shadow-sm mb-8",children:[e.jsx("div",{className:"bg-blueprint-blue text-white px-6 py-3 font-bold text-sm uppercase tracking-wide",children:"5. Maturity & Complexity"}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm font-bold text-gray-500 mb-8 uppercase tracking-wide",children:"Rate your environment (1=Low/Novice, 5=High/Expert)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsx(F,{label:"Team Expertise",value:A,onChange:re,lowLabel:"1 (Novice)",highLabel:"5 (Expert)"}),e.jsx(F,{label:"Tool Familiarity",value:I,onChange:ne,lowLabel:"1 (Low)",highLabel:"5 (High)"}),e.jsx(F,{label:"Infrastructure Config",value:P,onChange:ie,lowLabel:"1 (Manual)",highLabel:"5 (IaC)"}),e.jsx(F,{label:"Env. Complexity",value:L,onChange:ce,lowLabel:"1 (Simple)",highLabel:"5 (Chaotic)"})]})]})]}),e.jsx("div",{className:"text-center pb-12",children:e.jsx("button",{type:"button",onClick:be,className:"bg-blueprint-blue text-white px-10 py-4 font-extrabold uppercase tracking-wide hover:bg-blue-800 transition-all hover:-translate-y-0.5 shadow-md",children:"Calculate Migration ROM"})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-start justify-center z-50 overflow-y-auto pt-20 pb-12",children:e.jsxs("div",{className:"bg-white w-[90%] max-w-[900px] p-10 shadow-2xl border-t-8 border-blueprint-blue relative",children:[e.jsx("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 text-3xl font-bold text-gray-400 hover:text-gray-600",children:"×"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2 text-center",children:"ROM Assessment Results"}),e.jsx("div",{className:"w-full bg-gray-200 h-1 mb-8"}),e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Overall Complexity Rating"}),e.jsx("div",{className:`text-2xl font-black my-2 ${xe}`,children:U}),e.jsx("div",{className:"w-1/2 mx-auto bg-gray-200 h-3 overflow-hidden",children:e.jsx("div",{className:`h-full ${pe}`,style:{width:ue}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[e.jsxs("div",{className:"p-8 bg-gray-50 border border-gray-300 text-center",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Standard Manual Effort"}),e.jsx("p",{className:"text-4xl font-black text-gray-800",children:w.toLocaleString()}),e.jsx("p",{className:"text-sm font-bold text-gray-500",children:"Total Man-Hours"}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800",children:Math.ceil(w/k)})," ",e.jsx("span",{className:"text-gray-600",children:"Weeks"})]})]}),e.jsxs("div",{className:"p-8 bg-green-50 border border-green-300 text-center relative shadow-sm",children:[e.jsx("div",{className:"absolute -top-3 right-0 left-0 mx-auto w-max bg-green-600 text-white text-[10px] px-3 py-1 font-bold uppercase",children:"60% Acceleration"}),e.jsx("p",{className:"text-xs font-bold text-green-700 uppercase tracking-widest mb-2",children:"Blueprint Accelerated"}),e.jsx("p",{className:"text-4xl font-black text-green-700",children:C.toLocaleString()}),e.jsx("p",{className:"text-sm font-bold text-green-600",children:"Total Man-Hours"}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-green-200",children:[e.jsx("span",{className:"text-xl font-bold text-green-800",children:Math.ceil(C/k)})," ",e.jsx("span",{className:"text-green-700",children:"Weeks"})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 border border-gray-300 font-bold text-gray-600 hover:bg-gray-50 transition-colors",children:"Adjust Inputs"}),e.jsx("button",{onClick:we,disabled:l,className:"bg-blueprint-blue text-white px-8 py-3 font-bold hover:bg-blue-800 transition-colors shadow-sm disabled:opacity-50",children:l?"Sending...":"Request Detailed Proposal"})]})]})})]})}function V({title:n,rows:i,matrix:c,onUpdate:l}){return e.jsxs("div",{className:"bg-white border border-gray-300 shadow-sm mb-8",children:[e.jsx("div",{className:"bg-blueprint-blue text-white px-6 py-3 font-bold text-sm uppercase tracking-wide",children:n}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b-2 border-gray-200",children:[e.jsx("th",{className:"p-4 w-1/4 text-xs font-extrabold text-gray-500 uppercase",children:"Object Type"}),e.jsx("th",{className:"p-4 text-center text-xs font-extrabold text-green-700 uppercase",children:"Simple"}),e.jsx("th",{className:"p-4 text-center text-xs font-extrabold text-yellow-700 uppercase",children:"Medium"}),e.jsx("th",{className:"p-4 text-center text-xs font-extrabold text-red-700 uppercase",children:"Complex"}),e.jsx("th",{className:"p-4 text-center text-xs font-extrabold text-red-900 uppercase",children:"V. Complex"})]})}),e.jsx("tbody",{children:i.map(o=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"p-4 font-bold text-sm text-gray-900",children:o.label}),["simple","medium","complex","veryComplex"].map(m=>{var p;return e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"number",min:0,placeholder:"0",value:((p=c[o.key])==null?void 0:p[m])||"",onChange:s=>l(o.key,m,parseInt(s.target.value)||0),className:"w-full px-2 py-2 border border-gray-400 text-center font-semibold text-sm focus:border-blueprint-blue focus:ring-1 focus:ring-blueprint-blue outline-none"})},m)})]},o.key))})]})})]})}function Le({sections:n,platformColor:i}){const[c,l]=r.useState(!1);return e.jsxs("div",{className:"bg-white border border-gray-300 shadow-sm mb-8",children:[e.jsxs("button",{type:"button",onClick:()=>l(o=>!o),className:"w-full flex items-center justify-between px-6 py-3 font-bold text-sm uppercase tracking-wide text-white",style:{backgroundColor:i??"#1d4ed8"},children:[e.jsx("span",{children:"Assessment Details (from questionnaire)"}),e.jsx("span",{className:"text-lg",children:c?"▲":"▼"})]}),c&&e.jsx("div",{className:"p-6 space-y-6 max-h-[500px] overflow-y-auto",children:n.map(o=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-extrabold text-gray-500 uppercase tracking-wider border-b border-gray-200 pb-2 mb-3",children:o.title}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2",children:o.fields.map(m=>e.jsxs("div",{className:"flex gap-2 text-sm py-1",children:[e.jsxs("span",{className:"font-bold text-gray-700 shrink-0",children:[m.label,":"]}),e.jsx("span",{className:"text-gray-600 break-words",children:m.value})]},m.label))})]},o.title))})]})}function F({label:n,value:i,onChange:c,lowLabel:l,highLabel:o}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"block mb-2 font-bold text-gray-900 text-sm",children:n}),e.jsx("input",{type:"range",min:1,max:5,value:i,onChange:m=>c(parseInt(m.target.value)),className:"w-full accent-blueprint-blue cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs font-extrabold text-gray-500 mt-1",children:[e.jsx("span",{children:l}),e.jsx("span",{children:i}),e.jsx("span",{children:o})]})]})}export{Ve as default};
