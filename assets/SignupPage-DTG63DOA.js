import{a as l,j as e}from"./state-Cs2e8pUQ.js";import{u as v,L as C}from"./vendor-CXKupAPx.js";import{j as S,v as P,l as E,R as p,m as k}from"./index-C6ytLmkY.js";import{B as F}from"./Button-DXKAJ8Rw.js";import{S as T}from"./SEO-GIl7d8qL.js";const A={0:"bg-red-500",1:"bg-red-400",2:"bg-yellow-500",3:"bg-green-500",4:"bg-green-600"},B={0:"w-0",1:"w-1/4",2:"w-2/4",3:"w-3/4",4:"w-full"};function $(){const{signup:x,error:g}=S(),b=v(),[s,h]=l.useState({firstName:"",lastName:"",email:"",company:"",password:"",confirmPassword:"",website:""}),[w,n]=l.useState(null),[f,N]=l.useState(!1),[m,d]=l.useState(!1),t=l.useMemo(()=>s.email?P(s.email):null,[s.email]),a=l.useMemo(()=>s.password?E(s.password):null,[s.password]),r=i=>{h(y=>({...y,[i.target.name]:i.target.value})),n(null)},j=async i=>{if(i.preventDefault(),!s.website){if(t&&!t.valid){n(t.error||"Invalid email");return}if(s.password!==s.confirmPassword){n("Passwords do not match");return}if(a&&a.score<2){n("Password is too weak. "+a.errors.join(", "));return}if(k(s.password)){n("This password is too common. Please choose a stronger one.");return}d(!0);try{await x({email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName,company:s.company}),b(p.DASHBOARD,{replace:!0})}catch{}finally{d(!1)}}},c=w||g,o="w-full border border-gray-300 px-3 py-2 text-gray-900 bg-white focus:outline-none focus:border-blueprint-blue focus:ring-1 focus:ring-blueprint-blue",u=f&&t&&!t.valid;return e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(T,{title:"Create Account",description:"Create a Blueprint Marketplace account to access enterprise Databricks solutions."}),e.jsxs("div",{className:"bg-white border border-gray-300 border-t-4 border-t-blueprint-blue p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create Account"}),c&&e.jsx("div",{role:"alert",className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-sm",children:c}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signup-firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{id:"signup-firstName",type:"text",name:"firstName",value:s.firstName,onChange:r,required:!0,autoComplete:"given-name",className:o})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signup-lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{id:"signup-lastName",type:"text",name:"lastName",value:s.lastName,onChange:r,required:!0,autoComplete:"family-name",className:o})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Email"}),e.jsx("input",{id:"signup-email",type:"email",name:"email",value:s.email,onChange:r,onBlur:()=>N(!0),required:!0,autoComplete:"email",className:`${o} ${u?"border-red-400 focus:border-red-500 focus:ring-red-500":""}`}),u&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:t==null?void 0:t.error})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signup-company",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),e.jsx("input",{id:"signup-company",type:"text",name:"company",value:s.company,onChange:r,required:!0,autoComplete:"organization",className:o})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{id:"signup-password",type:"password",name:"password",value:s.password,onChange:r,required:!0,minLength:8,autoComplete:"new-password",className:o}),s.password&&a&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-1.5 w-full bg-gray-200",children:e.jsx("div",{className:`h-full transition-all duration-300 ${A[a.score]} ${B[a.score]}`})}),e.jsxs("p",{className:`text-xs mt-1 ${a.score<2?"text-red-600":a.score<3?"text-yellow-600":"text-green-600"}`,children:[a.label,a.errors.length>0&&e.jsxs("span",{className:"text-gray-500",children:[" â€” Needs: ",a.errors.join(", ")]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signup-confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsx("input",{id:"signup-confirmPassword",type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:r,required:!0,autoComplete:"new-password",className:o}),s.confirmPassword&&s.password!==s.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Passwords do not match"})]}),e.jsxs("div",{className:"absolute -left-[9999px]","aria-hidden":"true",children:[e.jsx("label",{htmlFor:"signup-website",children:"Website"}),e.jsx("input",{id:"signup-website",type:"text",name:"website",value:s.website,onChange:r,tabIndex:-1,autoComplete:"off"})]}),e.jsx(F,{type:"submit",className:"w-full",disabled:m,children:m?"Creating account...":"Create Account"})]}),e.jsxs("p",{className:"mt-6 text-sm text-center text-gray-500",children:["Already have an account?"," ",e.jsx(C,{to:p.LOGIN,className:"text-blueprint-blue hover:underline",children:"Sign in"})]})]})]})}export{$ as default};
